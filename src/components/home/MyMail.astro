---
import MyMailBox from '@com/main/MyMailBox.astro';
import { Icon } from 'astro-icon/components';

import onlineusers from '../../pages/api/users';

const username = 'dex';

// Assuming you're fetching the user data based on a specific `username` or `id`
const user = onlineusers.find(user => user.username === username);

// If the user is found, get the message count; otherwise, set it to 0
const messageCount = user ? user.messagenum : 0;
---
<MyMailBox 
    widthcss="w-[304px]"
    name="My Mail"
    pclass="flex items-center ml-2 text-xs font-semibold text-white mt-0.5" 
    backgroundColor="bg-blue-400" 
    borderColor="border-blue-400">
    <div class="py-1 px-4">
        <div class="flex items-center justify-between">
            <div class="flex flex-col space-y-1">
                <a class="flex items-center text-blue-600 fill-blue-600 font-semibold text-[11.2px] hover:text-red-600 hover:fill-red-600 w-fit group space-x-1" href="/">
                    <Icon class="h-[16px] w-auto group-hover:no-underline -mt-0.5" name="envelope" />
                    <p>Inbox</p>
                </a>
                <a class="flex items-center text-blue-600 fill-blue-600 font-semibold text-[11.2px] hover:text-red-600 hover:fill-red-600 w-fit group space-x-1" href="/">
                    <Icon class="h-[16px] w-auto group-hover:no-underline" name="sent" />
                    <span class="group-hover:underline">Send Message</span>
                </a>
            </div>
            <div class="flex flex-col space-y-1">
                <a class="flex items-center text-blue-600 fill-blue-600 font-semibold text-[11.2px] hover:text-red-600 hover:fill-red-600 w-fit group space-x-1" href="/bulletins">
                    <Icon class="h-[16px] w-[16px] group-hover:no-underline" name="list" />
                    <span class="group-hover:underline">Bulletins</span>
                </a>
                <a class="flex items-center text-blue-600 fill-blue-600 font-semibold text-[11.2px] hover:text-red-600 hover:fill-red-600 w-fit group space-x-1" href={`${username}/bulletins/createbulletin`}>
                    <Icon class="h-[15px] w-[16px] group-hover:no-underline" name="post" />
                    <span class="group-hover:underline">Create Bulletin</span>
                </a>
            </div>
        </div>
    </div>
</MyMailBox>