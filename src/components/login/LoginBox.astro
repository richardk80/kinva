<div class="border-x-2 border-b-2 border-neutral-950 w-[304px] h-[141px]">
    <div class="bg-neutral-950 w-[300px] h-[25px] pt-[4px]">
      <h1 class="text-xs font-semibold text-white text-left ml-2">Member Login</h1>
    </div>
    <div class="mt-[6px] mx-auto">
      <form id="loginForm" class="flex justify-center grid grid-flow-row space-y-1">
        <div class="flex items-center justify-end space-x-2">
          <p class="text-xs font-semibold">Email:</p>
          <input
            type="text"
            name="email"
            class="w-40 h-6 border-2 border-neutral-950 placeholder:text-xs text-xs pl-1.5 focus:outline-none"
            placeholder="Email Address..."
            autocomplete="on"
            required
          />
        </div>
        <div class="flex items-center space-x-2">
          <p class="text-xs font-semibold">Password:</p>
          <input
            type="password"
            name="password"
            class="w-40 h-6 border-2 border-neutral-950 placeholder:text-xs text-xs pl-1.5 focus:outline-none"
            placeholder="Password..."
            autocomplete="on"
            required
          />
        </div>
        <div class="flex justify-end items-center space-x-2">
            <a
              class="group text-sm text-white hover:underline px-1 py-0.5 border-2 border-orange-600 bg-orange-600 hover:brightness-110"
              href="/signup"
            >Sign Up</a>
          <button
            type="submit"
            class="group text-sm text-white hover:underline px-1 py-0.5 border-2 border-neutral-950 bg-neutral-950 hover:brightness-125"
          >
            Log In
          </button>
        </div>
      </form>
      <div class="min-w-fit flex justify-end mr-2 mt-1">
        <a
          class="text-xs text-neutral-950 hover:text-red-600 hover:underline font-semibold"
          href="/resetpassword"
        >Forget Password?</a>
      </div>
    </div>
  </div>
  
  <script>
    const loginForm = document.getElementById('loginForm') as HTMLFormElement;
  
    loginForm.addEventListener('submit', async (event) => {
      event.preventDefault();
  
      const formData = new FormData(loginForm);
      const email = formData.get('email');
      const password = formData.get('password');
  
      try {
        const response = await fetch('/api/auth', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            action: 'signin',
            email,
            password,
          }),
        });
  
        if (response.ok) {
        const data = await response.json();
        console.log('User logged in:', data.user);

        // Redirect to the home page
        window.location.href = '/home';
      } else {
        const error = await response.json();
        alert(`Login failed: ${error.error}`);
      }
    } catch (error) {
      console.error('Login error:', error);
      alert('An error occurred. Please try again.');
    }
  });
</script>