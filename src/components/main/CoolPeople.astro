---
import RegularBox from '@com/main/RegularBox.astro';
import ProfileImage from "@com/home/ProfileImage.astro";

const { name, username } = Astro.props;

const profilepic = true;

// Array of possible names and photo URLs
const names = ['Alex', 'Jordan', 'Taylor', 'Morgan', 'Jamie', 'Casey', 'Riley', 'Cameron', 'Avery', 'Rowan'];
const photos = [
  "https://i.pravatar.cc/96?img=3",
  "https://i.pravatar.cc/96?img=5",
  "https://i.pravatar.cc/96?img=7",
  "https://i.pravatar.cc/96?img=9",
  "https://i.pravatar.cc/96?img=11",
  "https://i.pravatar.cc/96?img=13",
  "https://i.pravatar.cc/96?img=15",
  "https://i.pravatar.cc/96?img=17",
  "https://i.pravatar.cc/96?img=19",
  "https://i.pravatar.cc/96?img=21"
];

// Shuffle function to randomize arrays
const shuffleArray = (array) => {
  let shuffledArray = array.slice(); // Copy the array
  for (let i = shuffledArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffledArray[i], shuffledArray[j]] = [shuffledArray[j], shuffledArray[i]]; // Swap elements
  }
  return shuffledArray;
};

// Shuffle names and photos and select the first 4
const randomNames = shuffleArray(names).slice(0, 4);
const randomPhotos = shuffleArray(photos).slice(0, 4);
---

<RegularBox 
  name="Cool New People" 
  name2="[view more]" 
  pclass="flex items-center justify-between mx-2 text-xs font-semibold mt-0.5" 
  backgroundColor="bg-orange-400/60"
  borderColor="border-orange-400/60" 
  aclass="text-[10px] -mt-0.5 font-normal hover:underline" 
  aurl="/browse"
>
  <div class="flex items-start justify-center mb-1.5 mt-0.5 mx-2 space-x-7">
    {randomNames.map((randomName, index) => (
      <a href={`/${username}`} target="_self" title={`Visit ${randomName}'s profile`}>
        <div class="flex items-center justify-center flex-col hover:underline text-xs font-semibold text-blue-600 hover:text-red-600">
          <p class="mb-0.5">{randomName}</p>
          <ProfileImage
            width={96}
            height={96}
            srcurl={profilepic ? randomPhotos[index] : "/img/avatar.png"}
            altText={`${randomName}'s profile picture`}
          />
        </div>
      </a>
    ))}
  </div>
</RegularBox>
