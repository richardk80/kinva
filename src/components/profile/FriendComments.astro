---
import RegularBox from '@com/main/RegularBox.astro';

import SmallLink from '@com/main/SmallLink.astro';

const { loggedin, name, username } = Astro.props;

//let parts = name.split(' ')
//let firstName = parts.shift();
//let lastName = parts.join(' ');

const comments: number = 5; // Replace with the actual count of comments for the user
const feedbackThreshold: number = 5; // Set the threshold for displaying comments

// Check if feedback exceeds the threshold
const showViewAll = comments >= feedbackThreshold;
---
<RegularBox 
  username2=`${name}'s Friend Feedback`
  name2={showViewAll ? "[view all]" : ""}
  pclass="flex items-center justify-between mx-2 text-xs font-semibold text-white mt-0.5" 
  backgroundColor="bg-neutral-950" 
  borderColor="border-neutral-950" 
  aclass="text-[10px] -mt-0.5 font-normal hover:underline text-white" 
  aurl=`${username}/friendfeedback`
>
    <div class="ml-2 pt-1 pb-1 space-x-2 flex items-center">
      <p class="text-xs">
        <span class="font-semibold">{name} has <span class="text-neutral-950">{comments}</span> { comments === 0 ? 'comments' : comments > 1 ? 'comments' : 'comment' }</span>
        { loggedin ? 
          <span class="text-xs"><SmallLink href={`${username}/friendfeedback`} link="add comment" /></span>
        : '' 
        }
    </p>
    </div>
</RegularBox>