---
import BubbleBox from '@com/main/BubbleBox.astro';
import UserDetailEditLinks from '@com/profile/UserDetailEditLinks.astro';
import ProfileImage from '@com/main/ProfileImage.astro';
import Mood from '@com/profile/Mood.astro';
import BottomUserDetailLinks from '@com/profile/BottomUserDetailLinks.astro';
import { Icon } from 'astro-icon/components';

interface Props {
    loggedin?: boolean;
    onlinenow?: boolean;
    name?: string;
    username?: string;
    lastActive?: string;
    profilepic?: boolean;
    profileimg?: string;
}

const { loggedin, onlinenow, name, username, lastActive, profilepic, profileimg  } = Astro.props;
---
<BubbleBox
    name={name} 
    name2="[edit name]"
    loggedin={loggedin}
    pclass="flex items-center justify-between text-base font-semibold text-white h-6 mx-2 mt-0.5" 
    backgroundColor="bg-[#60A5FA]" 
    borderColor="border-[#60A5FA]" 
    aclass="text-[10px] -mt-0.5 font-normal hover:underline text-white" 
    aurl={`/${username}/settings`}
>
        <div class={ loggedin ? 'pl-4 pb-2 pt-2.5' : 'pl-4 pb-2 pt-2' }>
            <div class="flex items-center space-x-2 -ml-2 mb-2.5 -mt-0.5">
                <UserDetailEditLinks loggedin={loggedin} username={username} />
            </div>
            <div class="flex justify-between -mt-1 mb-2 -ml-1.5">
                <div class="relative inline-block">
                    { profilepic ?
                          <ProfileImage
                            width={160}
                            height={160}
                            srcurl={profileimg}
                            altText="Astro's profile picture"
                            loggedin={loggedin}
                          />
                         :
                        <div class="relative mb-1.5">
                          <Icon class="w-[160px] h-[160px]" name="avatar" />
                          {loggedin && (
                            <div class="absolute bottom-0 right-0 block w-7 h-7 rounded-full bg-green-500 border-[2px] border-white -mb-1 -mr-1"></div>
                          )}
                        </div>
                    }
              </div>
            </div>
            <div class="space-y-1.5">
                <div class="-mt-2 -ml-1.5">
                    <Mood loggedin={loggedin} username={username} lastActive={lastActive} />
                </div>
                <div class="-ml-1.5">
                    <BottomUserDetailLinks username={username} />
                </div>
            </div>
        </div>
</BubbleBox>
