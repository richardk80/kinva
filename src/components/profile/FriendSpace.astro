---
import RegularBox from '@com/main/RegularBox.astro';
import { Image } from 'astro:assets';

const { name, friendcount } = Astro.props;

const hidden = true;

const peoplecount = 8;

//let parts = name.split(' ')
//let firstName = parts.shift();
//let lastName = parts.join(' ');

let friendnum = (8 < peoplecount) ? 8 : peoplecount;
---
<RegularBox widthcss="w-[100%]" username2={ hidden ? `Astro's` : `Your` } name="Friend Space" name2="[view all]" pclass="flex items-center justify-between mx-2 text-xs font-semibold text-red-600 mt-0.5" backgroundColor="bg-orange-400/60" borderColor="border-orange-400/60" aclass="text-[10px] -mt-0.5 font-normal hover:underline text-black" aurl=`/astro/friends`>
    <p class="text-xs font-semibold ml-2 pt-1">{ hidden ? `Astro has` : `You have` } <span class="text-red-600">{ peoplecount > 0 ?  peoplecount : '0' }</span> { friendcount === 1 ? 'friend' : 'friends' }</p>
    <div class={ peoplecount > 0 ? "grid grid-flow-dense grid-cols-4 pt-1 pb-0.5 pl-[1px]" : "grid grid-flow-dense grid-cols-4 pt-0 pb-1 pl-[1px]"}>
      {[...Array(friendnum)].map(() => (
        <div class={ peoplecount > 0 ? "py-1 px-1" : "py-0 px-1" }>
          { peoplecount > 0 ? 
        <a href="/astro" title="Visit Astro's profile">
          <div class="flex items-center justify-center flex-col hover:underline text-xs font-semibold text-blue-600 hover:text-red-600">
            <p>{`Astro`}</p>
            <Image width={95} height={95} loading="eager" src="/img/avatar.png" alt="Astro's profile picture" />
            </div>
            </a>
            : '' }
            </div>
            ))
          }
    </div>
</RegularBox>