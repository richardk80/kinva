---
import RegularBox from '@com/main/RegularBox.astro';
import ProfileImage from '@com/main/ProfileImage.astro';

const hidden = true;

const peoplecount: number = 9;

//let parts = name.split(' ')
//let firstName = parts.shift();
//let lastName = parts.join(' ');

let friendnum = (8 < peoplecount) ? 8 : peoplecount;

const profilepic = true;
---
<RegularBox 
  widthcss="w-[100%]" 
  username2={hidden ? `Astro's` : `Your`} 
  name="Friend Space" 
  name2="[view all]" 
  pclass="flex items-center justify-between mx-2 text-xs font-semibold text-red-600 mt-0.5" 
  backgroundColor="bg-orange-400/60" 
  borderColor="border-orange-400/60" 
  aclass="text-[10px] -mt-0.5 font-normal hover:underline text-black" 
  aurl="/astro/friends"
>
    <p class={ peoplecount === 0 ?  "text-xs font-semibold ml-2 pt-1.5" : "text-xs font-semibold ml-2 pt-2" }>{ hidden ? `Astro has` : `You have` } <span class="text-red-600">{ peoplecount > 0 ?  peoplecount : '0' }</span> { peoplecount === 0 ? 'friends' : peoplecount > 1 ? 'friends' : 'friend' }
    </p>
    <div class={ peoplecount > 0 ? "grid grid-flow-dense grid-cols-4 gap-x-1 gap-y-2 pt-1 pb-0.5" : "grid grid-flow-dense grid-cols-4 pt-1"}>
      {[...Array(friendnum)].map(() => (
        <div class={ peoplecount > 0 ? "pt-0.5 pb-2 px-1" : "py-0 px-1" }>
          { peoplecount > 0 ? 
        <a href="/astro" title="Visit Astro's profile">
          <div class="flex items-center justify-center flex-col hover:underline text-xs font-semibold text-blue-600 hover:text-red-600">
            <p>Astro</p>
            <ProfileImage
              width={96}
              height={96}
              srcurl={profilepic ? "https://i.pravatar.cc/96?img=3" : "/img/avatar.png"}
              altText="Astro's profile picture"
            />
            </div>
            </a>
            : '' }
            </div>
            ))
          }
    </div>
</RegularBox>